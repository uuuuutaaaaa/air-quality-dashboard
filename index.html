<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<title>Greenhouse</title>
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<style>
		body {
			font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
			margin: 0;
			padding: 1rem;
			background: #fafafa;
			color: #111;
		}

		h1 {
			margin-top: 0;
		}

		.section {
			margin-bottom: 1.5rem;
			padding: 1rem;
			background: #ffffff;
			border: 1px solid #ddd;
			border-radius: 6px;
		}

		.label {
			font-weight: 600;
		}

		.value {
			font-family: monospace;
		}

		button {
			width: 100%;
			padding: 0.75rem;
			font-size: 1rem;
			margin-top: 0.5rem;
		}

		.tooltip-container {
			position: relative;
			display: inline-flex;
			align-items: center;
			gap: 0.4rem;
		}

		.tooltip-trigger {
			all: unset;
			cursor: pointer;
			font-weight: bold;
			width: 1.2rem;
			height: 1.2rem;
			line-height: 1.2rem;
			text-align: center;
			border-radius: 50%;
			background: #444;
			color: #fff;
			font-size: 0.8rem;
			transform: translateY(-0.1rem);
		}

		.tooltip-trigger:focus-visible {
			outline: 2px solid #88f;
		}

		.tooltip-content {
			position: absolute;
			top: 100%;
			left: 0;
			margin-top: 0.4rem;
			padding: 0.5rem 0.7rem;
			max-width: 220px;

			background: #222;
			color: #eee;
			border-radius: 4px;
			font-size: 0.8rem;
			line-height: 1.3;

			opacity: 0;
			pointer-events: none;
			transform: translateY(-4px);
			transition: opacity 0.15s ease, transform 0.15s ease;
			z-index: 10;
		}

		/* Show on hover (desktop) */
		.tooltip-container:hover .tooltip-content,
		/* Show on focus (keyboard + mobile tap) */
		.tooltip-trigger:focus + .tooltip-content {
			opacity: 1;
			transform: translateY(0);
			pointer-events: auto;
		}
	</style>
</head>

<body>

	<!-- ---------- MAIN APP ---------- -->
	<div>

		<!-- Header / connection state -->
		<div class="section">
			<h1>Greenhouse</h1>
			<div class="status-line">
				Connection: <span id="connectionStatus">disconnected</span>
			</div>
			<div class="status-line">
				Last update: <span id="lastUpdate">—</span>
			</div>
		</div>

		<div class="section">
			<h2>MQTT Connection</h2>

			<input
				id="mqttPassphrase"
				type="password"
				placeholder="Access passphrase"
				style="width: 100%; padding: 0.5rem; font-size: 1rem;"
			/>

			<button id="mqttConnectButton" style="margin-top: 0.5rem;">
				Connect
			</button>

			<p id="mqttError" style="color: #b00020; display: none;">
				Failed to connect.
			</p>
		</div>

		<!-- Sensors / environmental status -->
		<div class="section">
			<h2>Environment</h2>

			<div><span class="label">Air Quality:</span>
				<span class="value" id="airQuality">—</span>
			</div>
		</div>

		<!-- Effectors / desired state -->
		<div class="section">
			<h2>System</h2>

			<div><span class="label">Uptime:</span>
				<span class="value" id="uptime">—</span>
			</div>

			<div><span class="label">Mode:</span>
				<span class="value" id="controlMode">—</span>
			</div>

			<div><span class="label">Light Status:</span>
				<span class="value" id="lightState">—</span>
			</div>

			<div><span class="label">Last Updated:</span>
				<span class="value" id="sysTimestamp">—</span>
			</div>
		</div>

	</div>

	<!-- External libraries -->
	<script src="https://unpkg.com/mqtt/dist/mqtt.min.js"></script>

	<!-- App logic -->
	<script src="app.js"></script>

</body>
</html>